@using LegendaryBlog.Models;
@helper Render(Post post, System.Web.Mvc.HtmlHelper html, bool isAdmin, bool ShowComments)
{
   <div class="postTitle"><a href="@Href("~/Posts/Details/"+post.Id)">@post.Title</a></div>
   <div class="postContainer">
       <div class="postTabs">
           <div class="dateTab">
               <div class="month">@post.DateTime.ToString("MMM").ToUpper()</div>
               <div class="day">@post.DateTime.ToString("dd")</div>

           </div>
           <div class="commentsTab">
               <a href="@Href("~/Posts/Details/"+post.Id+"comments")">@post.Comments.Count</a>
           </div>
       </div>
       <div class="postContent">
           <div class="postBody">@html.Raw(post.Body)</div>
           <div class="tagList">
               @foreach (Tag tag in post.Tags)
               {
                   <span class="tag"><a href="@Href("~/Posts/Tags/"+tag.Name)">@tag.Name</a></span>
               }
           </div>
       </div>
   </div>
if (ShowComments) {
        <div id="commentContainer">
            <a id="comments">

            </a>
            @foreach(Comment comment in post.Comments.OrderBy(x=>x.DateTime))
            {
                <div class="comment">
                    <div class="commentName">
                        @comment.SendID
                    </div>
                    said:
                    <div class="commentBody">@html.Raw(html.Encode(comment.Body).Replace("\n","<br/>"))</div>
                    <div class="commentTime"> at @comment.DateTime.ToString("HH:MM") on @comment.DateTime.ToString("yyyy/mm/dd")</div>
                </div>
            }
            <div id="commentEditor"></div>
                <div id="commentPrompt">
                    Leave a comment
                    <form action="@Href("~/Posts/Comment/"+post.Id)" method="post">
                        <input type="text" id="commentNamePrompt" name="name"/>Name(required)<br />
                         <textarea id="commentBodyInput" name="body" rows="10" cols="60"></textarea><br />
                        <input type="submit" id="commentSubmitInput" name="submit" value="submit!" />
                    </form>
            </div>
        </div>
}
}